var strict;function adsensei_switch_version(e,a){jQuery(a).attr("onClick","");var t={action:"adsensei_change_mode",mode:e,nonce:adsensei.nonce};jQuery.post(ajaxurl,t,function(e,a,t){window.location.href=adsensei.path+"/wp-admin/admin.php?page=adsensei-settings"}).fail(function(e){adsensei_show_message("Ajax Error: "+e.status+" "+e.statusText)})}jQuery(document).ready(function(e){function a(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function t(e){let a=/google_ad_slot\s*=\s*"(\d*)";/g,t=e;for(var s,i={};null!==(s=a.exec(t));)s.index===a.lastIndex&&a.lastIndex++,s.forEach(function(e,a){console.log(e),i=e});return i}function s(e){let a=/google_ad_client\s*=\s*"ca-pub-(\d*)";/g,t=e;for(var s,i={};null!==(s=a.exec(t));)s.index===a.lastIndex&&a.lastIndex++,s.forEach(function(e,a){console.log(e),i=e});return i}function i(e){let a=/google_ad_width\s*=\s*(\d*);/g,t=e;for(var s,i={};null!==(s=a.exec(t));)s.index===a.lastIndex&&a.lastIndex++,s.forEach(function(e,a){console.log(e),i=e});return i}function n(e){let a=/google_ad_height\s*=\s*(\d*);/g,t=e;for(var s,i={};null!==(s=a.exec(t));)s.index===a.lastIndex&&a.lastIndex++,s.forEach(function(e,a){console.log(e),i=e});return i}function o(e){return!e||0===e.length}function l(a){e("#adsensei-error-details").show(),e("#adsensei-error-details").html(a),console.log(a)}e('a[href$="adsensei_switch_to_new"]').removeAttr("href").attr("onClick","adsensei_switch_version('new',this);"),e('a[href$="adsensei_switch_to_old"]').removeAttr("href").attr("onClick","adsensei_switch_version('old',this);"),e(".wpadsensei-send-query").on("click",function(t){t.preventDefault();var s=e("#wpadsensei_query_message").val(),i=e("#wpadsensei_query_email").val(),n=e("#wpadsensei_query_premium_cus").val(),o=adsensei.nonce;""!=e.trim(s)&&n&&""!=e.trim(i)&&!0==a(i)?e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"wpadsensei_send_query_message",premium_cus:n,message:s,email:i,wpadsensei_security_nonce:o},success:function(a){e(".wpadsensei_support_div ul").hide(),"t"==a.status?(e(".wpadsensei-query-success").show(),e(".wpadsensei-query-error").hide()):(e(".wpadsensei-query-success").hide(),e(".wpadsensei-query-error").show())},error:function(e){console.log(e)}}):""==e.trim(s)&&""==n&&""==e.trim(i)?alert("Please enter the message, email and select customer type"):(""==n&&alert("Select Customer type"),""==e.trim(s)&&alert("Please enter the message"),""==e.trim(i)&&alert("Please enter the email"),!1==a(i)&&alert("Please enter a valid email"))}),e(".adsensei-tooltip").click(function(a){var t=e(this),s=e(this).next();if(void 0!==s.html()){a.preventDefault(),e(".adsensei-tooltip-message").not(s).hide();var i=t.position();s.hasClass("bottom")?s.css({left:i.left-s.width()/2+"px",top:i.top+t.height()+9+"px"}):s.css({left:i.left+t.width()+9+"px",top:i.top+t.height()/2-18+"px"}),s.toggle(),a.stopPropagation()}}),e("body").click(function(){e(".adsensei-tooltip-message").hide()}),e(".adsensei-tooltip-message").click(function(e){e.stopPropagation()}),e("#adsensei_vi_login_submit").click(function(a){a.preventDefault();var t='{"email":"'+(username=e("#adsensei-vi-email").val())+'", "password":"'+(password=e("#adsensei-vi-password").val())+'"}';return e.ajax({type:"POST",url:adsensei.vi_login_url,contentType:"application/json",data:t,statusCode:{502:function(){return e("#adsensei_add_err").html("502 Bad Gateway. Contact support[at]vi.ai"),console.log("502 Bad Gateway."),!1},500:function(){return e("#adsensei_add_err").html("500 Bad Gateway. Contact support[at]vi.ai"),console.log("500 Bad Gateway."),!1}},success:function(a){var t;e("#adsensei_add_err").css("display","none","important").css("visibility","hidden"),e("#adsensei_add_err").hide(),void 0!==a.data?(e("#adsensei_add_err").html("We are logging you in"),console.log("We are logging you in"+a),t=a.data,e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"adsensei_save_vi_token",token:t},success:function(a){return(console.log(a.status),e("#adsensei_add_err").css("display","none","important").css("visibility","hidden"),e("#adsensei_add_err").hide(),void 0!==a.status&&"success"==a.status)?(console.log("Success, login succesfull, token stored"+a),window.location.href=adsensei.path+"/wp-admin/?page=adsensei-settings&tab=general#adsensei_settingsvi_header",!1):(console.log("Can not store token"),window.location.href=adsensei.path+"/wp-admin/?page=adsensei-settings&tab=general#adsensei_settingsvi_header",!1)},beforeSend:function(){e("#adsensei_add_err").css("display","inline","important").css("visibility","visible"),e("#adsensei_add_err").show()},complete:function(){e("#adsensei_add_err").css("display","none","important").css("visibility","hidden"),e("#adsensei_add_err").hide()}})):(e("#adsensei_add_err").html("No valid API response. Can not log you in. Contact support[at]vi.ai"),console.log("no valid api response"+a))},error:function(a){if(void 0!==this.statusCode[a.status])return!1;var t=void 0!==a.responseText?JSON.parse(a.responseText):"";e("#adsensei_add_err").html(t.error.message+" "+t.error.description),e("#adsensei_add_err").css("display","inline","important").css("visibility","visible"),e("#adsensei_add_err").show(),e("#adsensei_add_err").removeClass("adsensei-spinner"),console.log(t)},beforeSend:function(){e("#adsensei_vi_loading").css("display","inline","important").css("visibility","visible"),e("#adsensei_add_err").show()},complete:function(){e("#adsensei_vi_loading").css("display","none","important").css("visibility","hidden")}}),!1}),document.location.href.indexOf("vi_header")>-1?(e("#adsensei-submit-button").hide(),e("#adsensei-validate").hide(),e("#adsensei-footer").hide()):(e("#adsensei-submit-button").show(),e("#adsensei-validate").show(),e("#adsensei-footer").show()),e(window).bind("easytabs:after",function(){document.location.href.indexOf("vi_header")>-1?(e("#adsensei-submit-button").hide(),e("#adsensei-validate").hide(),e("#adsensei-footer").hide()):(e("#adsensei-submit-button").show(),e("#adsensei-validate").show(),e("#adsensei-footer").show())}),e("#adsensei-vi-signup").click(function(a){a.preventDefault(),e(window).scrollTop(0),e("#adsensei-submit-button").hide(),e("#adsensei-vi-signup-fullscreen").fadeIn()}),e("#adsensei-vi-close").click(function(a){a.preventDefault(),e("#adsensei-vi-signup-fullscreen").fadeOut()}),e(".adsensei-assign").each(function(a){e(this).prop("checked")?e(this).next("select").css("background-color","white").css("color","black"):e(this).next("select").css("background-color","whitesmoke").css("color","#939393")}),e(".adsensei-assign").click(function(){e(this).prop("checked")?e(this).next("select").css("background-color","white").css("color","black"):e(this).next("select").css("background-color","whitesmoke").css("color","#939393")}),e(window).scroll(function(){if(!e("#adsensei_settings").length)return!0;var a,t,s,i,n,o,l="#adsensei_tab_container .submit",d=(a=e("#adsensei_settings"),t=e(window).scrollTop(),s=t+e(window).height(),i=a.offset().top,n=i+a.outerHeight(!0),i>t&&i<s||n>t&&n<s||t>=i&&t<=n||s>=i&&s<=n);!(e(l).length<1)&&(e(l).offset().top,e(l).offset().top,e(l).outerHeight(!1),e(window).scrollTop(),e(window).height(),d?e("#adsensei-submit-button").css("position","fixed").css("bottom","20px"):e("#adsensei-submit-button").css("position","relative").css("bottom","20px"))}),e(".adsensei-activate-amp").click(function(){var a=e(this).parents(".adsensei-ad-toggle-container").attr("id");"checked"===e(this).attr("checked")?e("#"+a).find(".adsensei-amp-code").show():e("#"+a).find(".adsensei-amp-code").hide()}),e(".adsensei-ad-toggle-container").find(".adsensei-activate-amp").each(function(a,t){var s=e(this).parents(".adsensei-ad-toggle-container").attr("id");"checked"===e(this).attr("checked")?e("#"+s).find(".adsensei-amp-code").show():e("#"+s).find(".adsensei-amp-code").hide()}),e("#adsensei-open-toggle").click(function(){"Open All Ads"===e("#adsensei-open-toggle").text()?(e(".adsensei-ad-toggle-container").show(),e("#adsensei-open-toggle").html("Close Ads")):(e(".adsensei-ad-toggle-container").hide(),e("#adsensei-open-toggle").html("Open All Ads"))}),e(".adsensei-helper").click(function(a){a.preventDefault();var t=e(this),s=e(this).next();e(".adsensei-message").not(s).hide();var i=t.position();s.hasClass("bottom")?s.css({left:i.left-s.width()/2+"px",top:i.top+t.height()+9+"px"}):s.css({left:i.left+t.width()+9+"px",top:i.top+t.height()/2-18+"px"}),s.toggle(),a.stopPropagation()}),e(document).on("mouseover",".adsensei-general-helper",function(a){a.preventDefault();var t=e(this),s=e(this).next();e(".adsensei-message").not(s).hide();var i=t.position();s.hasClass("bottom")?s.css({left:i.left-s.width()/2+"px",top:i.top+t.height()+9+"px"}):s.css({left:i.left+t.width()+9+"px",top:i.top+t.height()/2-18+"px"}),s.toggle(),a.stopPropagation()}),e(document).on("mouseout",".adsensei-general-helper",function(a){e(".adsensei-message").hide()}),e(document).on("click",".adsensei-general-helper",function(a){var t=e(this),s=e(this).next();if(void 0!==s.html()){a.preventDefault(),e(".adsensei-message").not(s).hide();var i=t.position();s.hasClass("bottom")?s.css({left:i.left-s.width()/2+"px",top:i.top+t.height()+9+"px"}):s.css({left:i.left+t.width()+9+"px",top:i.top+t.height()/2-18+"px"}),s.toggle(),a.stopPropagation()}}),e("body").click(function(){e(".adsensei-message").hide()}),e(".adsensei-message").click(function(e){e.stopPropagation()}),jQuery("#adsensei_settings").submit(function(){a={action:"adsensei_clear_cache",nonce:adsensei.nonce},e.post(ajaxurl,a,function(e,a,t){console.log("success:"+e+a+t)}).fail(function(e){console.log("error: "+e.statusText)}),e(".adsensei-toogle-title").each(function(){e(this).children("input").val(e(this).text())});var a,t=window.location.search.search("page=adsensei-settings&tab=imexport");if(jQuery("#adsensei-save-result").html("<div id='adsensei-loader' class='adsensei-loader'></div>"),jQuery("#adsensei-loader").append('<p><img src="'+adsensei.path+'/wp-content/plugins/adsenseib30/assets/images/loader1.gif"></p>').show(),jQuery(this).ajaxSubmit({success:function(){jQuery("#adsensei-save-result").html("<div id='adsensei-save-message' class='adsensei-success-modal'></div>"),jQuery("#adsensei-save-message").append('<p><img src="'+adsensei.path+'/wp-content/plugins/adsenseib30/assets/images/saved.gif"></p>').show(),setTimeout("jQuery('#adsensei-save-message').hide()",1e3)},error:function(){-1===t&&alert("Error: Can not save settings. Try again"),jQuery("#adsensei-save-result").hide("fast")}}),-1===t)return!1}),e(document).on("click","#adsensei-paste-button",function(){var a,l,d,c,r=function a(l){var d=void 0!==l?l.trim():"",c={},r=e("<div />").html(d).find("ins");if(r.length>0)return console.log("async ad"),c.slotId=r.attr("data-ad-slot"),void 0!==r.attr("data-ad-client")&&(c.pubId=r.attr("data-ad-client").substr(3)),void 0!==c.slotId&&""!=c.pubId&&((c.display=r.css("display"),c.format=r.attr("data-ad-format"),c.style=r.attr("style"),void 0===c.format&&-1!=c.style.indexOf("width"))?(c.type="normal",c.width=r.css("width").replace("px",""),c.height=r.css("height").replace("px",""),c):(void 0!==c.format&&"auto"==c.format&&(c.type="responsive"),c));if(d.search("google_ad_client")>0){if(console.log("syncronous code"),c.slotId=t(l),console.log(t(l)),console.log(s(l)),console.log(n(l)),console.log(i(l)),o(s(l)))return!1;if(c.pubId="ca-pub-"+s(l),!o(c.slotId)&&!o(c.pubId)&&!o(i(l)))return c.type="normal",c.width=i(l),c.height=n(l),c}return!1}(e("#adsensei-adsense-form").val());!1!==r?(console.log(r),l=r,c=(d=e("#adsensei-adsense-id").val()).replace("adsensei-toggle",""),e("#adsensei_settings\\[ads\\]\\["+c+"\\]\\[g_data_ad_slot\\]").val(l.slotId),e("#adsensei_settings\\[ads\\]\\["+c+"\\]\\[g_data_ad_client\\]").val(l.pubId),"normal"==l.type&&(console.log(e("#adsensei_settings\\[ads\\]\\["+c+"\\]\\[adsense_type\\]")),e("#adsensei_settings\\[ads\\]\\["+c+"\\]\\[adsense_type\\]").val("normal"),e("#adsensei_settings\\[ads\\]\\["+c+"\\]\\[g_data_ad_width\\]").val(l.width),e("#adsensei_settings\\[ads\\]\\["+c+"\\]\\[g_data_ad_height\\]").val(l.height)),"responsive"==l.type&&(e("#adsensei_settings\\[ads\\]\\["+c+"\\]\\[adsense_type\\]").val("responsive"),e("#adsensei_settings\\[ads\\]\\["+c+"\\]\\[g_data_ad_width\\]").val(""),e("#adsensei_settings\\[ads\\]\\["+c+"\\]\\[g_data_ad_height\\]").val("")),e(".adsensei-select-Type").trigger("change"),e("#adsensei-adsense-bg-div").hide(),0===e("#"+d).children("textarea").val().length&&e("#"+d).children("textarea").val("adsense")):(e("#adsensei-msg").html("Can not parse AdSense Code. Is the code valid?"),e("#adsensei-msg").show())}),e(document).on("click",".adsensei-add-adsense",function(a){a.preventDefault();var t=e(this).parents(".adsensei-ad-toggle-container").attr("id");e("#adsensei-adsense-form").val(""),e("#adsensei-adsense-id").val(t),e("#adsensei-adsense-bg-div").show()}),e(document).on("click","#adsensei-close-button",function(a){a.preventDefault(),e("#adsensei-adsense-bg-div").hide()}),e(document).on("click",".adsensei_adsense_type",function(){var a=e(this).parents(".adsensei-ad-toggle-container").attr("id");"adsense"===e(this).val()&&(e("#"+a).children("textarea").hide(),e("#"+a).find("div.adsensei_adsense_code").show(),e("#"+a).find(".adsensei-sizes").show(),e("#"+a).find(".adsensei-sizes-container").css("clear","")),"plain_text"===e(this).val()&&(e("#"+a).children("textarea").show(),e("#"+a).children("div.adsensei_adsense_code").hide(),e("#"+a).find(".adsensei-sizes").hide(),e("#"+a).find(".adsensei-sizes-container").css("clear","both"))}),e(".adsensei-ad-toggle-container").find(".adsensei_adsense_type").each(function(a,t){var s=e(this).parents(".adsensei-ad-toggle-container").attr("id");"checked"===e(this).attr("checked")&&"adsense"===e(this).val()&&(e("#"+s).children("textarea").fadeOut(),e("#"+s).find("div.adsensei_adsense_code").show()),"checked"===e(this).attr("checked")&&"plain_text"===e(this).val()&&(e("#"+s).children("textarea").fadeIn(),e("#"+s).children("div.adsensei_adsense_code").hide())}),e(".adsensei-ad-toggle-container").find(".adsensei-select-Type").each(function(a,t){var s=e(this).parents(".adsensei-ad-toggle-container").attr("id");"responsive"===e(this).val()&&(e("#"+s).find(".adsensei-type-normal").hide(),e("#"+s).find(".adsensei-notice").show(),e("#"+s).find(".adsensei-sizes").show(),e("#"+s).find(".adsensei-sizes-container").css("clear","")),"normal"===e(this).val()&&(e("#"+s).find(".adsensei-type-normal").show(),e("#"+s).find(".adsensei-notice").hide(),e("#"+s).find(".adsensei-sizes").hide(),e("#"+s).find(".adsensei-sizes-container").css("clear","both"))}),e(document).on("change",".adsensei-select-Type",function(){var a=e(this).parents(".adsensei-ad-toggle-container").attr("id");"responsive"===e(this).val()&&(e("#"+a).find(".adsensei-type-normal").hide(),e("#"+a).find(".adsensei-notice").show(),e("#"+a).find(".adsensei-sizes").show(),e("#"+a).find(".adsensei-sizes-container").css("clear","")),"normal"===e(this).val()&&(e("#"+a).find(".adsensei-type-normal").show(),e("#"+a).find(".adsensei-notice").hide(),e("#"+a).find(".adsensei-sizes").hide(),e("#"+a).find(".adsensei-sizes-container").css("clear","both"))}),e(".adsensei-form-table").on("click",".adsensei-ad-toggle-header",function(a){a.preventDefault();var t=e("#"+e(this).data("box-id"));t.toggle(0,function(){t.parents(".adsensei-ad-toggle-header").hasClass("adsensei-box-close")?t.parents(".adsensei-ad-toggle-header").removeClass("adsensei-box-close"):t.parents(".adsensei-ad-toggle-header").addClass("adsensei-box-close")})}),jQuery(".adsensei-import-settings").click(function(a){if(a.preventDefault(),confirm("Importing settings from Quick AdSense will overwrite all your current settings. Are you sure?")){jQuery("#adsensei-import-settings").addClass("loading");var t={action:"adsensei_import_quick_adsense",nonce:adsensei.nonce};e.post(ajaxurl,t,function(e,a,t){l(e)}).fail(function(e){l("Ajax Error: "+e.status+" "+e.statusText)})}}),jQuery("#adsensei_insert_ads_action").click(function(e){e.preventDefault(),jQuery("#adsensei_insert_ads_box").toggle()}),jQuery("#adsensei_disable_ads_action").click(function(e){e.preventDefault(),jQuery("#adsensei_disable_ads_box").toggle()}),e(".adsensei-tabs").length&&e("#adsensei_tab_container").easytabs({animate:!0,updateHash:!0,animationSpeed:"fast"})}),function(e,a,t){var s,i="hashchange",n=document,o=e.event.special,l=n.documentMode,d="on"+i in a&&(l===t||l>7);function c(e){return"#"+(e=e||location.href).replace(/^[^#]*#?(.*)$/,"$1")}e.fn[i]=function(e){return e?this.bind(i,e):this.trigger(i)},e.fn[i].delay=50,o[i]=e.extend(o[i],{setup:function(){if(d)return!1;e(s.start)},teardown:function(){if(d)return!1;e(s.stop)}}),s=function(){var s,o,l,r={},p=c(),h=function(e){return e},f=h,u=h;function g(){var t=c(),s=u(p);t!==p?(f(p=t,s),e(a).trigger(i)):s!==p&&(location.href=location.href.replace(/#.*/,"")+s),l=setTimeout(g,e.fn[i].delay)}return r.start=function(){l||g()},r.stop=function(){l&&clearTimeout(l),l=t},d||(r.start=function(){s||(o=(o=e.fn[i].src)&&o+c(),s=e('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){o||f(c()),g()}).attr("src",o||"javascript:0").insertAfter("body")[0].contentWindow,n.onpropertychange=function(){try{"title"===event.propertyName&&(s.document.title=n.title)}catch(e){}})},r.stop=h,u=function(){return c(s.location.href)},f=function(a,t){var o=s.document,l=e.fn[i].domain;a!==t&&(o.title=n.title,o.open(),l&&o.write('<script>document.domain="'+l+'"</script>'),o.close(),s.location.hash=a)}),r}()}(jQuery,this),function(e){e.easytabs=function(a,t){var s,i,n,o,l,d,c=this,r=e(a),p={animate:!0,panelActiveClass:"active",tabActiveClass:"active",defaultTab:"li:first-child",animationSpeed:"fast",tabs:"> ul > li",updateHash:!0,cycle:!1,collapsible:!1,collapsedClass:"collapsed",collapsedByDefault:!0,uiTabs:!1,transitionIn:"fadeIn",transitionOut:"fadeOut",transitionInEasing:"swing",transitionOutEasing:"swing",transitionCollapse:"slideUp",transitionUncollapse:"slideDown",transitionCollapseEasing:"swing",transitionUncollapseEasing:"swing",containerClass:"",tabsClass:"",tabClass:"",panelClass:"",cache:!0,event:"click",panelContext:r},h={fast:200,normal:400,slow:600};c.init=function(){c.settings=d=e.extend({},p,t),d.bind_str=d.event+".easytabs",d.uiTabs&&(d.tabActiveClass="ui-tabs-selected",d.containerClass="ui-tabs ui-widget ui-widget-content ui-corner-all",d.tabsClass="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all",d.tabClass="ui-state-default ui-corner-top",d.panelClass="ui-tabs-panel ui-widget-content ui-corner-bottom"),d.collapsible&&void 0!==t.defaultTab&&void 0===t.collpasedByDefault&&(d.collapsedByDefault=!1),"string"==typeof d.animationSpeed&&(d.animationSpeed=h[d.animationSpeed]),e("a.anchor").remove().prependTo("body"),r.data("easytabs",{}),c.setTransitions(),c.getTabs(),u(),g(),k(),y(),r.attr("data-easytabs",!0)},c.setTransitions=function(){n=d.animate?{show:d.transitionIn,hide:d.transitionOut,speed:d.animationSpeed,collapse:d.transitionCollapse,uncollapse:d.transitionUncollapse,halfSpeed:d.animationSpeed/2}:{show:"show",hide:"hide",speed:0,collapse:"hide",uncollapse:"show",halfSpeed:0}},c.getTabs=function(){var a;c.tabs=r.find(d.tabs),c.panels=e(),c.tabs.each(function(){var t=e(this),s=t.children("a"),i=t.children("a").data("target");t.data("easytabs",{}),null!=i?t.data("easytabs").ajax=s.attr("href"):i=s.attr("href"),i=i.match(/#([^\?]+)/)[1],(a=d.panelContext.find("#"+i)).length?(a.data("easytabs",{position:a.css("position"),visibility:a.css("visibility")}),a.not(d.panelActiveClass).hide(),c.panels=c.panels.add(a),t.data("easytabs").panel=a):(c.tabs=c.tabs.not(t),"console"in window&&console.warn("Warning: tab without matching panel for selector '#"+i+"' removed from set"))})},c.selectTab=function(e,a){var t=(window.location.hash.match(/^[^\?]*/)[0],e.parent().data("easytabs").panel),s=e.parent().data("easytabs").ajax;d.collapsible&&!l&&(e.hasClass(d.tabActiveClass)||e.hasClass(d.collapsedClass))?c.toggleTabCollapse(e,t,s,a):e.hasClass(d.tabActiveClass)&&t.hasClass(d.panelActiveClass)&&d.cache||b(e,t,s,a)},c.toggleTabCollapse=function(e,a,t,s){c.panels.stop(!0,!0),f(r,"easytabs:before",[e,a,d])&&(c.tabs.filter("."+d.tabActiveClass).removeClass(d.tabActiveClass).children().removeClass(d.tabActiveClass),e.hasClass(d.collapsedClass)?(!t||d.cache&&e.parent().data("easytabs").cached||(r.trigger("easytabs:ajax:beforeSend",[e,a]),a.load(t,function(t,s,i){e.parent().data("easytabs").cached=!0,r.trigger("easytabs:ajax:complete",[e,a,t,s,i])})),e.parent().removeClass(d.collapsedClass).addClass(d.tabActiveClass).children().removeClass(d.collapsedClass).addClass(d.tabActiveClass),a.addClass(d.panelActiveClass)[n.uncollapse](n.speed,d.transitionUncollapseEasing,function(){r.trigger("easytabs:midTransition",[e,a,d]),"function"==typeof s&&s()})):(e.addClass(d.collapsedClass).parent().addClass(d.collapsedClass),a.removeClass(d.panelActiveClass)[n.collapse](n.speed,d.transitionCollapseEasing,function(){r.trigger("easytabs:midTransition",[e,a,d]),"function"==typeof s&&s()})))},c.matchTab=function(e){return c.tabs.find("[href='"+e+"'],[data-target='"+e+"']").first()},c.matchInPanel=function(e){return e&&c.validId(e)?c.panels.filter(":has("+e+")").first():[]},c.validId=function(e){return e.substr(1).match(/^[A-Za-z]+[A-Za-z0-9\-_:\.].$/)},c.selectTabFromHashChange=function(){var e,a=window.location.hash.match(/^[^\?]*/)[0],t=c.matchTab(a);d.updateHash&&(t.length?(l=!0,c.selectTab(t)):(e=c.matchInPanel(a)).length?(a="#"+e.attr("id"),t=c.matchTab(a),l=!0,c.selectTab(t)):!s.hasClass(d.tabActiveClass)&&!d.cycle&&(""===a||c.matchTab(o).length||r.closest(a).length)&&(l=!0,c.selectTab(i)))},c.cycleTabs=function(a){d.cycle&&(a%=c.tabs.length,$tab=e(c.tabs[a]).children("a").first(),l=!0,c.selectTab($tab,function(){setTimeout(function(){c.cycleTabs(a+1)},d.cycle)}))},c.publicMethods={select:function(a){var t;0===(t=c.tabs.filter(a)).length?0===(t=c.tabs.find("a[href='"+a+"']")).length&&0===(t=c.tabs.find("a"+a)).length&&0===(t=c.tabs.find("[data-target='"+a+"']")).length&&0===(t=c.tabs.find("a[href$='"+a+"']")).length&&e.error("Tab '"+a+"' does not exist in tab set"):t=t.children("a").first(),c.selectTab(t)}};var f=function(a,t,s){var i=e.Event(t);return a.trigger(i,s),!1!==i.result},u=function(){r.addClass(d.containerClass),c.tabs.parent().addClass(d.tabsClass),c.tabs.addClass(d.tabClass),c.panels.addClass(d.panelClass)},g=function(){var a,t=window.location.hash.match(/^[^\?]*/)[0],n=c.matchTab(t).parent();1===n.length?(s=n,d.cycle=!1):(a=c.matchInPanel(t)).length?(t="#"+a.attr("id"),s=c.matchTab(t).parent()):0===(s=c.tabs.parent().find(d.defaultTab)).length&&e.error("The specified default tab ('"+d.defaultTab+"') could not be found in the tab set ('"+d.tabs+"') out of "+c.tabs.length+" tabs."),i=s.children("a").first(),v(n)},v=function(a){var t,n;d.collapsible&&0===a.length&&d.collapsedByDefault?s.addClass(d.collapsedClass).children().addClass(d.collapsedClass):(t=e(s.data("easytabs").panel),(n=s.data("easytabs").ajax)&&(!d.cache||!s.data("easytabs").cached)&&(r.trigger("easytabs:ajax:beforeSend",[i,t]),t.load(n,function(e,a,n){s.data("easytabs").cached=!0,r.trigger("easytabs:ajax:complete",[i,t,e,a,n])})),s.data("easytabs").panel.show().addClass(d.panelActiveClass),s.addClass(d.tabActiveClass).children().addClass(d.tabActiveClass)),r.trigger("easytabs:initialised",[i,t])},b=function(e,a,t,s){if(c.panels.stop(!0,!0),f(r,"easytabs:before",[e,a,d])){var i,p,h,u,g=c.panels.filter(":visible"),v=a.parent(),b=window.location.hash.match(/^[^\?]*/)[0];d.animate&&(i=$(a),h=i-(p=g.length?m(g):0)),o=b,u=function(){r.trigger("easytabs:midTransition",[e,a,d]),d.animate&&"fadeIn"==d.transitionIn&&h<0&&v.animate({height:v.height()+h},n.halfSpeed).css({"min-height":""}),d.updateHash&&!l?window.location.hash="#"+a.attr("id"):l=!1,a[n.show](n.speed,d.transitionInEasing,function(){v.css({height:"","min-height":""}),r.trigger("easytabs:after",[e,a,d]),"function"==typeof s&&s()})},!t||d.cache&&e.parent().data("easytabs").cached||(r.trigger("easytabs:ajax:beforeSend",[e,a]),a.load(t,function(t,s,i){e.parent().data("easytabs").cached=!0,r.trigger("easytabs:ajax:complete",[e,a,t,s,i])})),d.animate&&"fadeOut"==d.transitionOut&&(h>0?v.animate({height:v.height()+h},n.halfSpeed):v.css({"min-height":v.height()})),c.tabs.filter("."+d.tabActiveClass).removeClass(d.tabActiveClass).children().removeClass(d.tabActiveClass),c.tabs.filter("."+d.collapsedClass).removeClass(d.collapsedClass).children().removeClass(d.collapsedClass),e.parent().addClass(d.tabActiveClass).children().addClass(d.tabActiveClass),c.panels.filter("."+d.panelActiveClass).removeClass(d.panelActiveClass),a.addClass(d.panelActiveClass),g.length?g[n.hide](n.speed,d.transitionOutEasing,u):a[n.uncollapse](n.speed,d.transitionUncollapseEasing,u)}},$=function(a){if(a.data("easytabs")&&a.data("easytabs").lastHeight)return a.data("easytabs").lastHeight;var t,s,i=a.css("display");try{t=e("<div></div>",{position:"absolute",visibility:"hidden",overflow:"hidden"})}catch(n){t=e("<div></div>",{visibility:"hidden",overflow:"hidden"})}return s=a.wrap(t).css({position:"relative",visibility:"hidden",display:"block"}).outerHeight(),a.unwrap(),a.css({position:a.data("easytabs").position,visibility:a.data("easytabs").visibility,display:i}),a.data("easytabs").lastHeight=s,s},m=function(e){var a=e.outerHeight();return e.data("easytabs")?e.data("easytabs").lastHeight=a:e.data("easytabs",{lastHeight:a}),a},k=function(){"function"==typeof e(window).hashchange?e(window).hashchange(function(){c.selectTabFromHashChange()}):e.address&&"function"==typeof e.address.change&&e.address.change(function(){c.selectTabFromHashChange()})},y=function(){var e;d.cycle&&(e=c.tabs.index(s),setTimeout(function(){c.cycleTabs(e+1)},d.cycle))};c.init()},e.fn.easytabs=function(a){var t=arguments;return this.each(function(){var s=e(this),i=s.data("easytabs");if(void 0===i&&(i=new e.easytabs(this,a),s.data("easytabs",i)),i.publicMethods[a])return i.publicMethods[a](Array.prototype.slice.call(t,1))})}}(jQuery),function(e){var a,t,s,i,n,o,l,d,c,r,p,h,f,u,g,v,b,$,m,k,y,C,w,x,_,T,I,A,S=(a={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156},t=function(a,t){var s=P(a);e(t).data("colpick").fields.eq(1).val(s.r).end().eq(2).val(s.g).end().eq(3).val(s.b).end()},s=function(a,t){e(t).data("colpick").fields.eq(4).val(Math.round(a.h)).end().eq(5).val(Math.round(a.s)).end().eq(6).val(Math.round(a.b)).end()},i=function(a,t){e(t).data("colpick").fields.eq(0).val(H(a))},n=function(a,t){e(t).data("colpick").selector.css("backgroundColor","#"+H({h:a.h,s:100,b:100})),e(t).data("colpick").selectorIndic.css({left:parseInt(e(t).data("colpick").height*a.s/100,10),top:parseInt(e(t).data("colpick").height*(100-a.b)/100,10)})},o=function(a,t){e(t).data("colpick").hue.css("top",parseInt(e(t).data("colpick").height-e(t).data("colpick").height*a.h/360,10))},l=function(a,t){e(t).data("colpick").currentColor.css("backgroundColor","#"+H(a))},d=function(a,t){e(t).data("colpick").newColor.css("backgroundColor","#"+H(a))},c=function(a){var l,c=e(this).parent().parent();this.parentNode.className.indexOf("_hex")>0?(c.data("colpick").color=l=E(I(this.value)),t(l,c.get(0)),s(l,c.get(0))):this.parentNode.className.indexOf("_hsb")>0?(c.data("colpick").color=l=_({h:parseInt(c.data("colpick").fields.eq(4).val(),10),s:parseInt(c.data("colpick").fields.eq(5).val(),10),b:parseInt(c.data("colpick").fields.eq(6).val(),10)}),t(l,c.get(0)),i(l,c.get(0))):(c.data("colpick").color=l=D(T({r:parseInt(c.data("colpick").fields.eq(1).val(),10),g:parseInt(c.data("colpick").fields.eq(2).val(),10),b:parseInt(c.data("colpick").fields.eq(3).val(),10)})),i(l,c.get(0)),s(l,c.get(0))),n(l,c.get(0)),o(l,c.get(0)),d(l,c.get(0)),c.data("colpick").onChange.apply(c.parent(),[l,H(l),P(l),c.data("colpick").el,0])},r=function(a){e(this).parent().removeClass("colpick_focus")},p=function(){e(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus"),e(this).parent().addClass("colpick_focus")},h=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var t=e(this).parent().find("input").focus(),s={el:e(this).parent().addClass("colpick_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:a.pageY,field:t,val:parseInt(t.val(),10),preview:e(this).parent().parent().data("colpick").livePreview};e(document).mouseup(s,u),e(document).mousemove(s,f)},f=function(e){return e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val-e.pageY+e.data.y,10)))),e.data.preview&&c.apply(e.data.field.get(0),[!0]),!1},u=function(a){return c.apply(a.data.field.get(0),[!0]),a.data.el.removeClass("colpick_slider").find("input").focus(),e(document).off("mouseup",u),e(document).off("mousemove",f),!1},g=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var t={cal:e(this).parent(),y:e(this).offset().top};e(document).on("mouseup touchend",t,b),e(document).on("mousemove touchmove",t,v);var s="touchstart"==a.type?a.originalEvent.changedTouches[0].pageY:a.pageY;return c.apply(t.cal.data("colpick").fields.eq(4).val(parseInt(360*(t.cal.data("colpick").height-(s-t.y))/t.cal.data("colpick").height,10)).get(0),[t.cal.data("colpick").livePreview]),!1},v=function(e){var a="touchmove"==e.type?e.originalEvent.changedTouches[0].pageY:e.pageY;return c.apply(e.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(e.data.cal.data("colpick").height-Math.max(0,Math.min(e.data.cal.data("colpick").height,a-e.data.y)))/e.data.cal.data("colpick").height,10)).get(0),[e.data.preview]),!1},b=function(a){return t(a.data.cal.data("colpick").color,a.data.cal.get(0)),i(a.data.cal.data("colpick").color,a.data.cal.get(0)),e(document).off("mouseup touchend",b),e(document).off("mousemove touchmove",v),!1},$=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var t,s={cal:e(this).parent(),pos:e(this).offset()};return s.preview=s.cal.data("colpick").livePreview,e(document).on("mouseup touchend",s,k),e(document).on("mousemove touchmove",s,m),"touchstart"==a.type?(pageX=a.originalEvent.changedTouches[0].pageX,t=a.originalEvent.changedTouches[0].pageY):(pageX=a.pageX,t=a.pageY),c.apply(s.cal.data("colpick").fields.eq(6).val(parseInt(100*(s.cal.data("colpick").height-(t-s.pos.top))/s.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(pageX-s.pos.left)/s.cal.data("colpick").height,10)).get(0),[s.preview]),!1},m=function(e){var a;return"touchmove"==e.type?(pageX=e.originalEvent.changedTouches[0].pageX,a=e.originalEvent.changedTouches[0].pageY):(pageX=e.pageX,a=e.pageY),c.apply(e.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(e.data.cal.data("colpick").height-Math.max(0,Math.min(e.data.cal.data("colpick").height,a-e.data.pos.top)))/e.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(e.data.cal.data("colpick").height,pageX-e.data.pos.left))/e.data.cal.data("colpick").height,10)).get(0),[e.data.preview]),!1},k=function(a){return t(a.data.cal.data("colpick").color,a.data.cal.get(0)),i(a.data.cal.data("colpick").color,a.data.cal.get(0)),e(document).off("mouseup touchend",k),e(document).off("mousemove touchmove",m),!1},y=function(a){var t=e(this).parent(),s=t.data("colpick").color;t.data("colpick").origColor=s,l(s,t.get(0)),t.data("colpick").onSubmit(s,H(s),P(s),t.data("colpick").el)},C=function(a){a.stopPropagation();var t=e("#"+e(this).data("colpickId"));t.data("colpick").onBeforeShow.apply(this,[t.get(0)]);var s=e(this).offset(),i=s.top+this.offsetHeight,n=s.left,o=x(),l=t.width();n+l>o.l+o.w&&(n-=l),t.css({left:n+"px",top:i+"px"}),!1!=t.data("colpick").onShow.apply(this,[t.get(0)])&&t.show(),e("html").mousedown({cal:t},w),t.mousedown(function(e){e.stopPropagation()})},w=function(a){!1!=a.data.cal.data("colpick").onHide.apply(this,[a.data.cal.get(0)])&&a.data.cal.hide(),e("html").off("mousedown",w)},x=function(){var e="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth)}},_=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},T=function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},I=function(e){var a=6-e.length;if(a>0){for(var t=[],s=0;s<a;s++)t.push("0");t.push(e),e=t.join("")}return e},A=function(){var a=e(this).parent(),l=a.data("colpick").origColor;a.data("colpick").color=l,t(l,a.get(0)),i(l,a.get(0)),s(l,a.get(0)),n(l,a.get(0)),o(l,a.get(0)),d(l,a.get(0))},{init:function(f){if("string"==typeof(f=e.extend({},a,f||{})).color)f.color=E(f.color);else if(void 0!=f.color.r&&void 0!=f.color.g&&void 0!=f.color.b)f.color=D(f.color);else{if(void 0==f.color.h||void 0==f.color.s||void 0==f.color.b)return this;f.color=_(f.color)}return this.each(function(){if(!e(this).data("colpickId")){var a,u,v=e.extend({},f);v.origColor=f.color;var b="collorpicker_"+parseInt(1e3*Math.random());e(this).data("colpickId",b);var m=e('<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>').attr("id",b);m.addClass("colpick_"+v.layout+(v.submit?"":" colpick_"+v.layout+"_ns")),"light"!=v.colorScheme&&m.addClass("colpick_"+v.colorScheme),m.find("div.colpick_submit").html(v.submitText).click(y),v.fields=m.find("input").change(c).blur(r).focus(p),m.find("div.colpick_field_arrs").mousedown(h).end().find("div.colpick_current_color").click(A),v.selector=m.find("div.colpick_color").on("mousedown touchstart",$),v.selectorIndic=v.selector.find("div.colpick_selector_outer"),v.el=this,v.hue=m.find("div.colpick_hue_arrs"),huebar=v.hue.parent();var k=navigator.userAgent.toLowerCase(),w="Microsoft Internet Explorer"===navigator.appName,x=w?parseFloat(k.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,_=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(w&&x<10)for(a=0;a<=11;a++)u=e("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+_[a]+", endColorstr="+_[a+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+_[a]+", endColorstr="+_[a+1]+')";'),huebar.append(u);else stopList=_.join(","),huebar.attr("style","background:-webkit-linear-gradient(top,"+stopList+"); background: -o-linear-gradient(top,"+stopList+"); background: -ms-linear-gradient(top,"+stopList+"); background:-moz-linear-gradient(top,"+stopList+"); -webkit-linear-gradient(top,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ");m.find("div.colpick_hue").on("mousedown touchstart",g),v.newColor=m.find("div.colpick_new_color"),v.currentColor=m.find("div.colpick_current_color"),m.data("colpick",v),t(v.color,m.get(0)),s(v.color,m.get(0)),i(v.color,m.get(0)),o(v.color,m.get(0)),n(v.color,m.get(0)),l(v.color,m.get(0)),d(v.color,m.get(0)),v.flat?(m.appendTo(this).show(),m.css({position:"relative",display:"block"})):(m.appendTo(document.body),e(this).on(v.showEvent,C),m.css({position:"absolute"}))}})},showPicker:function(){return this.each(function(){e(this).data("colpickId")&&C.apply(this)})},hidePicker:function(){return this.each(function(){e(this).data("colpickId")&&e("#"+e(this).data("colpickId")).hide()})},setColor:function(a,c){if(c=void 0===c?1:c,"string"==typeof a)a=E(a);else if(void 0!=a.r&&void 0!=a.g&&void 0!=a.b)a=D(a);else{if(void 0==a.h||void 0==a.s||void 0==a.b)return this;a=_(a)}return this.each(function(){if(e(this).data("colpickId")){var r=e("#"+e(this).data("colpickId"));r.data("colpick").color=a,r.data("colpick").origColor=a,t(a,r.get(0)),s(a,r.get(0)),i(a,r.get(0)),o(a,r.get(0)),n(a,r.get(0)),d(a,r.get(0)),r.data("colpick").onChange.apply(r.parent(),[a,H(a),P(a),r.data("colpick").el,1]),c&&l(a,r.get(0))}})}}),q=function(e){var e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:e>>16,g:(65280&e)>>8,b:255&e}},E=function(e){return D(q(e))},D=function(e){var a={h:0,s:0,b:0},t=Math.min(e.r,e.g,e.b),s=Math.max(e.r,e.g,e.b),i=s-t;return a.b=s,a.s=0!=s?255*i/s:0,0!=a.s?e.r==s?a.h=(e.g-e.b)/i:e.g==s?a.h=2+(e.b-e.r)/i:a.h=4+(e.r-e.g)/i:a.h=-1,a.h*=60,a.h<0&&(a.h+=360),a.s*=100/255,a.b*=100/255,a},P=function(e){var a={},t=e.h,s=255*e.s/100,i=255*e.b/100;if(0==s)a.r=a.g=a.b=i;else{var n=i,o=(255-s)*i/255,l=(n-o)*(t%60)/60;360==t&&(t=0),t<60?(a.r=n,a.b=o,a.g=o+l):t<120?(a.g=n,a.b=o,a.r=n-l):t<180?(a.g=n,a.r=o,a.b=o+l):t<240?(a.b=n,a.r=o,a.g=n-l):t<300?(a.b=n,a.g=o,a.r=o+l):t<360?(a.r=n,a.g=o,a.b=n-l):(a.r=0,a.g=0,a.b=0)}return{r:Math.round(a.r),g:Math.round(a.g),b:Math.round(a.b)}},z=function(a){var t=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];return e.each(t,function(e,a){1==a.length&&(t[e]="0"+a)}),t.join("")},H=function(e){return z(P(e))};e.fn.extend({colpick:S.init,colpickHide:S.hidePicker,colpickShow:S.showPicker,colpickSetColor:S.setColor}),e.extend({colpick:{rgbToHex:z,rgbToHsb:D,hsbToHex:H,hsbToRgb:P,hexToHsb:E,hexToRgb:q}})}(jQuery);
